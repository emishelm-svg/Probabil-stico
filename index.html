<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predictor de Supervivencia - Titanic</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2a5298);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
            padding: 20px;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .prediction-form {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .results {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2a5298;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            border-color: #2a5298;
            outline: none;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(to right, #2a5298, #1a2a6c);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 20px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .result-display {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        .probability-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
            font-weight: bold;
            font-size: 1.8rem;
            color: white;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.5s ease;
        }
        
        .survived {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
        }
        
        .not-survived {
            background: linear-gradient(135deg, #f44336, #c62828);
        }
        
        .probability-value {
            font-size: 3rem;
            font-weight: 700;
        }
        
        .prediction-text {
            font-size: 1.8rem;
            margin-top: 20px;
            font-weight: 700;
        }
        
        .explanation {
            margin-top: 20px;
            font-size: 1rem;
            color: #666;
            line-height: 1.5;
        }
        
        .details {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
        }
        
        .details h3 {
            color: #2a5298;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .factor-list {
            list-style-type: none;
        }
        
        .factor-list li {
            padding: 8px 0;
            border-bottom: 1px dashed #ddd;
            display: flex;
            justify-content: space-between;
        }
        
        .factor-list li:last-child {
            border-bottom: none;
        }
        
        .factor-positive {
            color: #2E7D32;
        }
        
        .factor-negative {
            color: #c62828;
        }
        
        .factor-neutral {
            color: #666;
        }
        
        footer {
            text-align: center;
            color: white;
            padding: 20px;
            margin-top: 30px;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .instructions {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            color: #333;
        }
        
        .instructions h3 {
            color: #2a5298;
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
        
        .ship-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #2a5298;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-ship ship-icon"></i> Predictor de Supervivencia - Titanic</h1>
            <p class="subtitle">Modelo probabilístico para predecir si hubieras sobrevivido al desastre del Titanic</p>
        </header>
        
        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> Instrucciones</h3>
            <p>Introduce los datos de un pasajero para obtener una predicción probabilística de su supervivencia basada en análisis estadístico del dataset real del Titanic. El modelo considera factores como clase, género, edad y más.</p>
        </div>
        
        <div class="content">
            <div class="prediction-form">
                <h2>Datos del Pasajero</h2>
                <form id="passengerForm">
                    <div class="form-group">
                        <label for="pclass">Clase del Pasajero</label>
                        <select id="pclass" name="pclass" required>
                            <option value="">Selecciona la clase</option>
                            <option value="1">Primera Clase</option>
                            <option value="2">Segunda Clase</option>
                            <option value="3">Tercera Clase</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sex">Género</label>
                        <select id="sex" name="sex" required>
                            <option value="">Selecciona el género</option>
                            <option value="female">Femenino</option>
                            <option value="male">Masculino</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="age">Edad</label>
                        <input type="number" id="age" name="age" min="0" max="100" placeholder="Ej: 25" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="sibsp">Número de Hermanos/Esposos a bordo</label>
                        <input type="number" id="sibsp" name="sibsp" min="0" max="10" placeholder="Ej: 1" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="parch">Número de Padres/Hijos a bordo</label>
                        <input type="number" id="parch" name="parch" min="0" max="10" placeholder="Ej: 0" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="fare">Tarifa del boleto (0$ a 600$)</label>
                        <input type="number" id="fare" name="fare" min="0" max="600" step="0.1" placeholder="Ej: 30.5" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="embarked">Puerto de Embarque</label>
                        <select id="embarked" name="embarked" required>
                            <option value="">Selecciona el puerto</option>
                            <option value="C">Cherburgo (C)</option>
                            <option value="Q">Queenstown (Q)</option>
                            <option value="S">Southampton (S)</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn">
                        <i class="fas fa-calculator"></i> Calcular Probabilidad de Supervivencia
                    </button>
                </form>
            </div>
            
            <div class="results">
                <h2>Resultado de la Predicción</h2>
                <div class="result-display">
                    <div id="probabilityCircle" class="probability-circle">
                        <div id="probabilityValue">--%</div>
                        <div>Probabilidad</div>
                    </div>
                    <div id="predictionText" class="prediction-text">
                        Introduce datos para ver la predicción
                    </div>
                    <div id="explanation" class="explanation">
                        Esta predicción se basa en un modelo probabilístico entrenado con datos reales del Titanic
                    </div>
                </div>
                
                <div class="details">
                    <h3><i class="fas fa-chart-bar"></i> Factores que influyeron</h3>
                    <ul class="factor-list" id="factorList">
                        <li>Cargando análisis de factores...</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Modelo probabilístico basado en análisis estadístico del dataset del Titanic | Datos históricos de 1912</p>
            <p>© 2023 Predictor de Supervivencia - Titanic | Solo con fines educativos</p>
        </footer>
    </div>
    
    <script>
        // Análisis estadístico del dataset del Titanic
        // Estos valores se han calculado previamente a partir del dataset proporcionado
        const survivalStats = {
            overall: 0.3838, // 38.38% de supervivencia general
            
            byClass: {
                1: 0.6296, // 62.96% para primera clase
                2: 0.4728, // 47.28% para segunda clase
                3: 0.2424  // 24.24% para tercera clase
            },
            
            bySex: {
                female: 0.7420, // 74.20% para mujeres
                male: 0.1889    // 18.89% para hombres
            },
            
            byAgeGroup: {
                child: 0.5906,    // 59.06% para niños (0-12)
                teen: 0.3793,     // 37.93% para adolescentes (13-19)
                adult: 0.3615,    // 36.15% para adultos (20-59)
                senior: 0.3438    // 34.38% para mayores (60+)
            },
            
            byFamilySize: {
                alone: 0.3035,    // 30.35% para quienes viajan solos
                small: 0.5789,    // 57.89% para familias pequeñas (1-3 miembros)
                large: 0.1613     // 16.13% para familias grandes (4+ miembros)
            },
            
            byFare: {
                low: 0.1975,      // 19.75% para tarifas bajas (<10)
                medium: 0.4839,   // 48.39% para tarifas medias (10-50)
                high: 0.7200      // 72.00% para tarifas altas (>50)
            },
            
            byEmbarked: {
                C: 0.5536,        // 55.36% para Cherburgo
                Q: 0.3896,        // 38.96% para Queenstown
                S: 0.3368         // 33.68% para Southampton
            }
        };
        
        // Función para calcular la probabilidad de supervivencia
        function calculateSurvivalProbability(passengerData) {
            // Iniciamos con la probabilidad base
            let probability = survivalStats.overall;
            let factors = [];
            
            // Factor de clase
            const classFactor = survivalStats.byClass[passengerData.pclass];
            const classImpact = (classFactor - survivalStats.overall) / 2;
            probability += classImpact;
            factors.push({
                name: "Clase del pasajero",
                value: passengerData.pclass === "1" ? "Primera" : (passengerData.pclass === "2" ? "Segunda" : "Tercera"),
                impact: classImpact,
                description: passengerData.pclass === "1" ? "Primera clase tenía mayor probabilidad de supervivencia" : 
                            (passengerData.pclass === "2" ? "Segunda clase tenía probabilidad media" : "Tercera clase tenía menor probabilidad")
            });
            
            // Factor de género
            const sexFactor = survivalStats.bySex[passengerData.sex];
            const sexImpact = (sexFactor - survivalStats.overall) / 2;
            probability += sexImpact;
            factors.push({
                name: "Género",
                value: passengerData.sex === "female" ? "Femenino" : "Masculino",
                impact: sexImpact,
                description: passengerData.sex === "female" ? "Las mujeres tenían prioridad en los botes salvavidas" : 
                            "Los hombres tenían menor probabilidad de supervivencia"
            });
            
            // Factor de edad
            let ageGroup = "adult";
            if (passengerData.age <= 12) ageGroup = "child";
            else if (passengerData.age <= 19) ageGroup = "teen";
            else if (passengerData.age >= 60) ageGroup = "senior";
            
            const ageFactor = survivalStats.byAgeGroup[ageGroup];
            const ageImpact = (ageFactor - survivalStats.overall) / 3;
            probability += ageImpact;
            factors.push({
                name: "Grupo de edad",
                value: ageGroup === "child" ? "Niño (0-12)" : 
                      (ageGroup === "teen" ? "Adolescente (13-19)" : 
                      (ageGroup === "adult" ? "Adulto (20-59)" : "Mayor (60+)")),
                impact: ageImpact,
                description: ageGroup === "child" ? "Los niños tenían prioridad en los botes salvavidas" : 
                            (ageGroup === "teen" ? "Adolescentes tenían probabilidad similar a adultos" : 
                            (ageGroup === "adult" ? "Adultos tenían probabilidad media" : "Mayores tenían probabilidad ligeramente menor"))
            });
            
            // Factor de tamaño familiar
            const familySize = parseInt(passengerData.sibsp) + parseInt(passengerData.parch);
            let familyGroup = "alone";
            if (familySize === 0) familyGroup = "alone";
            else if (familySize <= 3) familyGroup = "small";
            else familyGroup = "large";
            
            const familyFactor = survivalStats.byFamilySize[familyGroup];
            const familyImpact = (familyFactor - survivalStats.overall) / 3;
            probability += familyImpact;
            factors.push({
                name: "Tamaño familiar",
                value: familyGroup === "alone" ? "Viajaba solo" : 
                      (familyGroup === "small" ? "Familia pequeña (1-3)" : "Familia grande (4+)"),
                impact: familyImpact,
                description: familyGroup === "alone" ? "Viajar solo reducía las probabilidades" : 
                            (familyGroup === "small" ? "Familias pequeñas tenían mayor probabilidad" : 
                            "Familias grandes tenían dificultades para mantenerse juntas")
            });
            
            // Factor de tarifa
            let fareGroup = "medium";
            if (passengerData.fare < 10) fareGroup = "low";
            else if (passengerData.fare > 50) fareGroup = "high";
            
            const fareFactor = survivalStats.byFare[fareGroup];
            const fareImpact = (fareFactor - survivalStats.overall) / 3;
            probability += fareImpact;
            factors.push({
                name: "Precio del billete",
                value: fareGroup === "low" ? "Bajo (<10£)" : 
                      (fareGroup === "medium" ? "Medio (10-50£)" : "Alto (>50£)"),
                impact: fareImpact,
                description: fareGroup === "low" ? "Billetes baratos indicaban menor clase y probabilidad" : 
                            (fareGroup === "medium" ? "Billetes de precio medio tenían probabilidad media" : 
                            "Billetes caros indicaban mayor clase y probabilidad")
            });
            
            // Factor de puerto de embarque
            const embarkedFactor = survivalStats.byEmbarked[passengerData.embarked];
            const embarkedImpact = (embarkedFactor - survivalStats.overall) / 4;
            probability += embarkedImpact;
            factors.push({
                name: "Puerto de embarque",
                value: passengerData.embarked === "C" ? "Cherburgo" : 
                      (passengerData.embarked === "Q" ? "Queenstown" : "Southampton"),
                impact: embarkedImpact,
                description: passengerData.embarked === "C" ? "Cherburgo tenía mayor proporción de supervivientes" : 
                            (passengerData.embarked === "Q" ? "Queenstown tenía probabilidad media" : 
                            "Southampton tenía menor proporción de supervivientes")
            });
            
            // Ajustar la probabilidad para que esté entre 0 y 1
            probability = Math.max(0.05, Math.min(0.95, probability));
            
            return { probability, factors };
        }
        
        // Función para actualizar la interfaz con los resultados
        function updateResults(passengerData, results) {
            const probabilityPercent = Math.round(results.probability * 100);
            const probabilityCircle = document.getElementById('probabilityCircle');
            const probabilityValue = document.getElementById('probabilityValue');
            const predictionText = document.getElementById('predictionText');
            const explanation = document.getElementById('explanation');
            const factorList = document.getElementById('factorList');
            
            // Actualizar círculo de probabilidad
            probabilityValue.textContent = `${probabilityPercent}%`;
            
            if (probabilityPercent >= 50) {
                probabilityCircle.className = 'probability-circle survived';
                predictionText.textContent = 'PROBABLE SUPERVIVIENTE';
                predictionText.style.color = '#2E7D32';
                explanation.textContent = `Basado en las características ingresadas, este pasajero tendría una probabilidad del ${probabilityPercent}% de sobrevivir al desastre del Titanic.`;
            } else {
                probabilityCircle.className = 'probability-circle not-survived';
                predictionText.textContent = 'PROBABLE VÍCTIMA';
                predictionText.style.color = '#c62828';
                explanation.textContent = `Basado en las características ingresadas, este pasajero tendría una probabilidad del ${probabilityPercent}% de sobrevivir al desastre del Titanic.`;
            }
            
            // Actualizar lista de factores
            factorList.innerHTML = '';
            results.factors.forEach(factor => {
                const li = document.createElement('li');
                const impactPercent = Math.round(factor.impact * 100);
                
                li.innerHTML = `
                    <div>
                        <strong>${factor.name}:</strong> ${factor.value}<br>
                        <small>${factor.description}</small>
                    </div>
                    <div>
                        <strong class="${impactPercent > 0 ? 'factor-positive' : impactPercent < 0 ? 'factor-negative' : 'factor-neutral'}">
                            ${impactPercent > 0 ? '+' : ''}${impactPercent}%
                        </strong>
                    </div>
                `;
                factorList.appendChild(li);
            });
        }
        
        // Función para manejar el envío del formulario
        document.getElementById('passengerForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Obtener datos del formulario
            const passengerData = {
                pclass: document.getElementById('pclass').value,
                sex: document.getElementById('sex').value,
                age: parseInt(document.getElementById('age').value),
                sibsp: parseInt(document.getElementById('sibsp').value),
                parch: parseInt(document.getElementById('parch').value),
                fare: parseFloat(document.getElementById('fare').value),
                embarked: document.getElementById('embarked').value
            };
            
            // Calcular probabilidad
            const results = calculateSurvivalProbability(passengerData);
            
            // Actualizar la interfaz
            updateResults(passengerData, results);
        });
        
        // Función para cargar datos de ejemplo
        function loadExample(exampleNumber) {
            const examples = [
                {pclass: "1", sex: "female", age: 29, sibsp: 0, parch: 0, fare: 211.34, embarked: "C"},
                {pclass: "3", sex: "male", age: 25, sibsp: 0, parch: 0, fare: 7.05, embarked: "S"},
                {pclass: "2", sex: "male", age: 32, sibsp: 1, parch: 0, fare: 26, embarked: "S"},
                {pclass: "1", sex: "male", age: 48, sibsp: 1, parch: 2, fare: 120, embarked: "S"},
                {pclass: "3", sex: "female", age: 18, sibsp: 2, parch: 2, fare: 34.38, embarked: "S"}
            ];
            
            const example = examples[exampleNumber];
            
            document.getElementById('pclass').value = example.pclass;
            document.getElementById('sex').value = example.sex;
            document.getElementById('age').value = example.age;
            document.getElementById('sibsp').value = example.sibsp;
            document.getElementById('parch').value = example.parch;
            document.getElementById('fare').value = example.fare;
            document.getElementById('embarked').value = example.embarked;
            
            // Calcular automáticamente
            const results = calculateSurvivalProbability(example);
            updateResults(example, results);
        }
        
        // Inicializar con un ejemplo
        window.addEventListener('DOMContentLoaded', function() {
            loadExample(0);
            
            // Agregar botones de ejemplo al formulario
            const form = document.querySelector('.prediction-form');
            const exampleDiv = document.createElement('div');
            exampleDiv.className = 'form-group';
            exampleDiv.innerHTML = `
                <label>Ejemplos rápidos:</label>
                <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                    <button type="button" onclick="loadExample(0)" style="padding: 8px 12px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">Mujer 1ra Clase</button>
                    <button type="button" onclick="loadExample(1)" style="padding: 8px 12px; background: #f44336; color: white; border: none; border-radius: 5px; cursor: pointer;">Hombre 3ra Clase</button>
                    <button type="button" onclick="loadExample(2)" style="padding: 8px 12px; background: #FF9800; color: white; border: none; border-radius: 5px; cursor: pointer;">Hombre 2da Clase</button>
                </div>
            `;
            form.insertBefore(exampleDiv, form.querySelector('.btn'));
        });
    </script>
</body>
</html>
